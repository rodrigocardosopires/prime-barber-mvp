<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Prime Barber - Agende seu hor√°rio na melhor barbearia da cidade">
    <meta name="theme-color" content="#0d0d0d">
    <title>Prime Barber | Agende seu hor√°rio</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- ========== HEADER ========== -->
    <header class="header" id="header">
        <div class="header-container">
            <a href="#" class="logo" onclick="showSection('home')">
                <span class="logo-icon">‚úÇ</span>
                <span class="logo-text">PRIME<span class="logo-accent">BARBER</span></span>
            </a>
            <nav class="nav" id="nav">
                <a href="#" class="nav-link" onclick="showSection('home')">In√≠cio</a>
                <a href="#" class="nav-link" onclick="showSection('units')">Unidades</a>
                <a href="#" class="nav-link" onclick="showSection('booking')" id="nav-booking">Agendar</a>
                <a href="#" class="nav-link nav-link-auth" onclick="showSection('auth')" id="nav-auth">Entrar</a>
                <a href="#" class="nav-link nav-link-auth hidden" onclick="showSection('dashboard')" id="nav-dashboard">Minha √Årea</a>
                <a href="#" class="nav-link nav-link-auth hidden" onclick="handleLogout()" id="nav-logout">Sair</a>
            </nav>
            <button class="menu-toggle" id="menuToggle" aria-label="Menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <!-- ========== MAIN CONTENT ========== -->
    <main class="main">
        
        <!-- ===== HOME SECTION ===== -->
        <section class="section section-home active" id="section-home">
            <!-- Hero -->
            <div class="hero">
                <div class="hero-bg"></div>
                <div class="hero-content">
                    <h1 class="hero-title">
                        <span class="hero-title-line">Estilo &</span>
                        <span class="hero-title-line hero-title-accent">Tradi√ß√£o</span>
                    </h1>
                    <p class="hero-subtitle">A arte do corte perfeito em cada detalhe</p>
                    <button class="btn btn-primary btn-lg" onclick="showSection('booking')">
                        <span class="btn-icon">üìÖ</span>
                        Agendar Agora
                    </button>
                </div>
                <div class="hero-scroll">
                    <span>Role para explorar</span>
                    <div class="hero-scroll-line"></div>
                </div>
            </div>

            <!-- Units Preview -->
            <div class="home-section">
                <div class="container">
                    <h2 class="section-title">
                        <span class="section-title-icon">üè¨</span>
                        Nossas Unidades
                    </h2>
                    <p class="section-desc">Escolha a unidade mais pr√≥xima de voc√™</p>
                    <div class="units-grid" id="home-units-grid">
                        <!-- Populated by JS -->
                        <div class="skeleton-card"></div>
                        <div class="skeleton-card"></div>
                    </div>
                    <button class="btn btn-secondary" onclick="showSection('units')">
                        Ver Todas Unidades
                    </button>
                </div>
            </div>

            <!-- Services Preview -->
            <div class="home-section home-section-dark">
                <div class="container">
                    <h2 class="section-title">
                        <span class="section-title-icon">üíà</span>
                        Nossos Servi√ßos
                    </h2>
                    <p class="section-desc">Qualidade e precis√£o em cada servi√ßo</p>
                    <div class="services-preview" id="home-services-preview">
                        <!-- Populated by JS -->
                        <div class="skeleton-service"></div>
                        <div class="skeleton-service"></div>
                        <div class="skeleton-service"></div>
                    </div>
                </div>
            </div>

            <!-- CTA Section -->
            <div class="home-section home-section-cta">
                <div class="container">
                    <div class="cta-box">
                        <h2 class="cta-title">Pronto para renovar o visual?</h2>
                        <p class="cta-desc">Agende agora e garanta seu hor√°rio com os melhores profissionais</p>
                        <button class="btn btn-primary btn-lg" onclick="showSection('booking')">
                            Fazer Agendamento
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ===== UNITS SECTION ===== -->
        <section class="section section-units" id="section-units">
            <div class="container">
                <h1 class="page-title">Nossas Unidades</h1>
                <p class="page-subtitle">Encontre a Prime Barber mais perto de voc√™</p>
                <div class="units-list" id="units-list">
                    <!-- Populated by JS -->
                    <div class="skeleton-card skeleton-card-lg"></div>
                    <div class="skeleton-card skeleton-card-lg"></div>
                </div>
            </div>
        </section>

        <!-- ===== BOOKING SECTION (5 STEPS) ===== -->
        <section class="section section-booking" id="section-booking">
            <div class="container">
                <!-- Progress Bar -->
                <div class="booking-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <div class="progress-steps">
                        <div class="progress-step active" data-step="1">
                            <span class="step-number">1</span>
                            <span class="step-label">Unidade</span>
                        </div>
                        <div class="progress-step" data-step="2">
                            <span class="step-number">2</span>
                            <span class="step-label">Servi√ßo</span>
                        </div>
                        <div class="progress-step" data-step="3">
                            <span class="step-number">3</span>
                            <span class="step-label">Barbeiro</span>
                        </div>
                        <div class="progress-step" data-step="4">
                            <span class="step-number">4</span>
                            <span class="step-label">Hor√°rio</span>
                        </div>
                        <div class="progress-step" data-step="5">
                            <span class="step-number">5</span>
                            <span class="step-label">Confirmar</span>
                        </div>
                    </div>
                </div>

                <!-- Step 1: Choose Unit -->
                <div class="step-container active" id="step-1">
                    <h2 class="step-title">Escolha a Unidade</h2>
                    <p class="step-desc">Selecione a barbearia de sua prefer√™ncia</p>
                    <div class="booking-units-grid" id="booking-units-grid">
                        <!-- Populated by JS -->
                        <div class="skeleton-card"></div>
                        <div class="skeleton-card"></div>
                    </div>
                </div>

                <!-- Step 2: Choose Service -->
                <div class="step-container" id="step-2">
                    <!-- Featured Unit Image -->
                    <div class="unit-featured" id="step2-unit-featured">
                        <img src="" alt="" loading="lazy" id="step2-unit-img">
                        <div class="unit-featured-overlay">
                            <span class="unit-featured-name" id="step2-unit-name"></span>
                        </div>
                    </div>
                    <h2 class="step-title">Escolha o Servi√ßo</h2>
                    <p class="step-desc">Selecione o que deseja fazer hoje</p>
                    <div class="services-list" id="booking-services-list">
                        <!-- Populated by JS -->
                        <div class="skeleton-service"></div>
                        <div class="skeleton-service"></div>
                    </div>
                    <div class="step-nav">
                        <button class="btn btn-ghost" onclick="prevStep()">
                            ‚Üê Voltar
                        </button>
                    </div>
                </div>

                <!-- Step 3: Choose Barber -->
                <div class="step-container" id="step-3">
                    <!-- Featured Unit Image -->
                    <div class="unit-featured" id="step3-unit-featured">
                        <img src="" alt="" loading="lazy" id="step3-unit-img">
                        <div class="unit-featured-overlay">
                            <span class="unit-featured-name" id="step3-unit-name"></span>
                        </div>
                    </div>
                    <h2 class="step-title">Escolha o Barbeiro</h2>
                    <p class="step-desc">Selecione seu profissional favorito</p>
                    <div class="barbers-grid" id="booking-barbers-grid">
                        <!-- Populated by JS -->
                        <div class="skeleton-barber"></div>
                        <div class="skeleton-barber"></div>
                    </div>
                    <div class="step-nav">
                        <button class="btn btn-ghost" onclick="prevStep()">
                            ‚Üê Voltar
                        </button>
                    </div>
                </div>

                <!-- Step 4: Choose Date/Time -->
                <div class="step-container" id="step-4">
                    <!-- Featured Unit + Barber -->
                    <div class="step4-header">
                        <div class="unit-featured unit-featured-small" id="step4-unit-featured">
                            <img src="" alt="" loading="lazy" id="step4-unit-img">
                        </div>
                        <div class="barber-selected" id="step4-barber-selected">
                            <img src="" alt="" loading="lazy" id="step4-barber-img" class="barber-selected-avatar">
                            <span class="barber-selected-name" id="step4-barber-name"></span>
                        </div>
                    </div>
                    <h2 class="step-title">Escolha o Hor√°rio</h2>
                    <p class="step-desc">Selecione data e hor√°rio dispon√≠vel</p>
                    
                    <!-- Date Picker -->
                    <div class="date-picker">
                        <button class="date-nav" id="date-prev" aria-label="Semana anterior">‚Äπ</button>
                        <div class="date-scroll" id="date-scroll">
                            <!-- Populated by JS -->
                        </div>
                        <button class="date-nav" id="date-next" aria-label="Pr√≥xima semana">‚Ä∫</button>
                    </div>
                    
                    <!-- Time Slots -->
                    <div class="time-slots" id="time-slots">
                        <!-- Populated by JS -->
                        <p class="time-slots-empty">Selecione uma data para ver os hor√°rios</p>
                    </div>
                    
                    <div class="step-nav">
                        <button class="btn btn-ghost" onclick="prevStep()">
                            ‚Üê Voltar
                        </button>
                    </div>
                </div>

                <!-- Step 5: Confirmation -->
                <div class="step-container" id="step-5">
                    <h2 class="step-title">Confirme seu Agendamento</h2>
                    <p class="step-desc">Revise os detalhes antes de confirmar</p>
                    
                    <div class="confirmation-card">
                        <div class="confirmation-header">
                            <img src="" alt="" loading="lazy" id="confirm-unit-img" class="confirmation-unit-img">
                            <div class="confirmation-unit-info">
                                <h3 id="confirm-unit-name"></h3>
                                <p id="confirm-unit-address"></p>
                            </div>
                        </div>
                        
                        <div class="confirmation-details">
                            <div class="confirmation-row">
                                <div class="confirmation-barber">
                                    <img src="" alt="" loading="lazy" id="confirm-barber-img" class="confirmation-barber-img">
                                    <div>
                                        <span class="confirmation-label">Barbeiro</span>
                                        <span class="confirmation-value" id="confirm-barber-name"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="confirmation-row">
                                <span class="confirmation-label">Servi√ßo</span>
                                <span class="confirmation-value" id="confirm-service-name"></span>
                            </div>
                            <div class="confirmation-row">
                                <span class="confirmation-label">Data</span>
                                <span class="confirmation-value" id="confirm-date"></span>
                            </div>
                            <div class="confirmation-row">
                                <span class="confirmation-label">Hor√°rio</span>
                                <span class="confirmation-value" id="confirm-time"></span>
                            </div>
                            <div class="confirmation-row">
                                <span class="confirmation-label">Dura√ß√£o</span>
                                <span class="confirmation-value" id="confirm-duration"></span>
                            </div>
                            <div class="confirmation-row confirmation-row-total">
                                <span class="confirmation-label">Total</span>
                                <span class="confirmation-value confirmation-price" id="confirm-price"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step-nav step-nav-confirm">
                        <button class="btn btn-ghost" onclick="prevStep()">
                            ‚Üê Voltar
                        </button>
                        <button class="btn btn-primary btn-lg" onclick="confirmBooking()" id="btn-confirm">
                            ‚úì Confirmar Agendamento
                        </button>
                    </div>
                </div>

                <!-- Success State -->
                <div class="step-container" id="step-success">
                    <div class="success-state">
                        <div class="success-icon">‚úì</div>
                        <h2 class="success-title">Agendamento Confirmado!</h2>
                        <p class="success-desc">Voc√™ receber√° uma confirma√ß√£o por e-mail</p>
                        <div class="success-details" id="success-details">
                            <!-- Populated by JS -->
                        </div>
                        <div class="success-actions">
                            <button class="btn btn-primary" onclick="showSection('dashboard')">
                                Ver Meus Agendamentos
                            </button>
                            <button class="btn btn-secondary" onclick="resetBooking()">
                                Novo Agendamento
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ===== AUTH SECTION ===== -->
        <section class="section section-auth" id="section-auth">
            <div class="container">
                <div class="auth-box">
                    <!-- Login Form -->
                    <div class="auth-form active" id="auth-login">
                        <h1 class="auth-title">Bem-vindo de volta</h1>
                        <p class="auth-subtitle">Entre na sua conta para continuar</p>
                        
                        <form id="login-form" onsubmit="handleLogin(event)">
                            <div class="form-group">
                                <label for="login-email">E-mail</label>
                                <input type="email" id="login-email" name="email" required 
                                       placeholder="seu@email.com" autocomplete="email">
                            </div>
                            <div class="form-group">
                                <label for="login-password">Senha</label>
                                <input type="password" id="login-password" name="password" required 
                                       placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password">
                            </div>
                            <div class="form-error hidden" id="login-error"></div>
                            <button type="submit" class="btn btn-primary btn-block" id="btn-login">
                                Entrar
                            </button>
                        </form>
                        
                        <div class="auth-switch">
                            <span>N√£o tem conta?</span>
                            <a href="#" onclick="toggleAuthForm('register')">Criar conta</a>
                        </div>
                    </div>

                    <!-- Register Form -->
                    <div class="auth-form" id="auth-register">
                        <h1 class="auth-title">Criar Conta</h1>
                        <p class="auth-subtitle">Junte-se √† fam√≠lia Prime Barber</p>
                        
                        <form id="register-form" onsubmit="handleRegister(event)">
                            <div class="form-group">
                                <label for="register-name">Nome Completo</label>
                                <input type="text" id="register-name" name="name" required 
                                       placeholder="Seu nome" autocomplete="name">
                            </div>
                            <div class="form-group">
                                <label for="register-phone">Telefone</label>
                                <input type="tel" id="register-phone" name="phone" required 
                                       placeholder="(11) 99999-9999" autocomplete="tel">
                            </div>
                            <div class="form-group">
                                <label for="register-email">E-mail</label>
                                <input type="email" id="register-email" name="email" required 
                                       placeholder="seu@email.com" autocomplete="email">
                            </div>
                            <div class="form-group">
                                <label for="register-password">Senha</label>
                                <input type="password" id="register-password" name="password" required 
                                       placeholder="M√≠nimo 6 caracteres" autocomplete="new-password" minlength="6">
                            </div>
                            <div class="form-error hidden" id="register-error"></div>
                            <button type="submit" class="btn btn-primary btn-block" id="btn-register">
                                Criar Conta
                            </button>
                        </form>
                        
                        <div class="auth-switch">
                            <span>J√° tem conta?</span>
                            <a href="#" onclick="toggleAuthForm('login')">Fazer login</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ===== DASHBOARD SECTION (Cliente) ===== -->
        <section class="section section-dashboard" id="section-dashboard">
            <div class="container">
                <div class="dashboard-header">
                    <div>
                        <h1 class="page-title">Minha √Årea</h1>
                        <p class="page-subtitle">Ol√°, <span id="user-name">Cliente</span>!</p>
                    </div>
                    <button class="btn btn-primary" onclick="showSection('booking')">
                        + Novo Agendamento
                    </button>
                </div>

                <!-- Upcoming Appointments -->
                <div class="dashboard-section">
                    <h2 class="dashboard-section-title">Pr√≥ximos Agendamentos</h2>
                    <div class="appointments-list" id="upcoming-appointments">
                        <!-- Populated by JS -->
                        <div class="empty-state">
                            <span class="empty-icon">üìÖ</span>
                            <p>Nenhum agendamento futuro</p>
                            <button class="btn btn-secondary" onclick="showSection('booking')">
                                Agendar Agora
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Past Appointments -->
                <div class="dashboard-section">
                    <h2 class="dashboard-section-title">Hist√≥rico</h2>
                    <div class="appointments-list" id="past-appointments">
                        <!-- Populated by JS -->
                        <div class="empty-state">
                            <span class="empty-icon">üìã</span>
                            <p>Nenhum agendamento anterior</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ===== ADMIN PANEL ===== -->
        <section class="section section-admin" id="section-admin">
            <div class="container">
                <div class="admin-header">
                    <div>
                        <h1 class="page-title">Painel Administrativo</h1>
                        <p class="page-subtitle">Gerenciamento de agendamentos</p>
                    </div>
                    <div class="admin-unit-selector">
                        <label for="admin-unit-select">Unidade:</label>
                        <select id="admin-unit-select" onchange="loadAdminAppointments()">
                            <!-- Populated by JS -->
                        </select>
                    </div>
                </div>

                <!-- Date Filter -->
                <div class="admin-date-filter">
                    <button class="btn btn-ghost" id="admin-prev-day">‚Äπ</button>
                    <span class="admin-current-date" id="admin-current-date"></span>
                    <button class="btn btn-ghost" id="admin-next-day">‚Ä∫</button>
                </div>

                <!-- Admin Appointments -->
                <div class="admin-appointments" id="admin-appointments">
                    <!-- Populated by JS -->
                    <div class="empty-state">
                        <span class="empty-icon">üìã</span>
                        <p>Nenhum agendamento para esta data</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- ========== FOOTER ========== -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <span class="logo-icon">‚úÇ</span>
                    <span class="logo-text">PRIME<span class="logo-accent">BARBER</span></span>
                </div>
                <p class="footer-copy">¬© 2026 Prime Barber ‚Äî Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- ========== LOADING OVERLAY ========== -->
    <div class="loading-overlay hidden" id="loading-overlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- ========== TOAST NOTIFICATIONS ========== -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
    <script src="js/supabaseClient.js"></script>
    <script src="js/trinksStub.js"></script>
    <script src="js/app.js"></script>
</body>
</html>

